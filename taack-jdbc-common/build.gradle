plugins {
    id 'com.google.protobuf' version '0.8.18'
    id 'antlr'
}

repositories {
    mavenCentral()
}

dependencies {
    api 'com.google.protobuf:protobuf-java:3.21.9'
    antlr 'org.antlr:antlr4:4.11.1'
    implementation 'org.antlr:antlr4-runtime:4.11.1'
}

protobuf {
    generatedFilesBaseDir = "$projectDir/src/"

    if (new File("/usr/local/bin/protoc").exists()) {
        protoc {
            path = '/usr/local/bin/protoc'
        }
    } else if (new File("/opt/homebrew/bin/protoc").exists()) {
        protoc {
            path = '/opt/homebrew/bin/protoc'
        }
    } else {
        protoc {
            artifact = 'com.google.protobuf:protoc:3.21.9'
        }
    }
}
